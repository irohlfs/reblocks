<html lang=en>
 <head>
  <meta charset=UTF-8><meta name=viewport
      content="width=device-width, initial-scale=1">
  <title>Removed Features</title>
  <link rel=alternate
        href=https://40ants.com/reblocks/changelog.xml
        type=application/rss+xml>
  <link rel=stylesheet type=text/css
        href=../theme.css>
  <script type=text/javascript src=../jquery.js></script>
  <script type=text/javascript src=../toc.js></script>
  <link rel=stylesheet type=text/css
        href=../highlight.min.css>
  <script type=text/javascript
          src=../highlight.min.js></script>
  <script type=text/javascript>hljs.highlightAll();</script>
  <script type=text/javascript>
             MathJax = {
               tex: {
                 inlineMath: [[&#39;$&#39;,&#39;$&#39;]],
                 processEscapes: true
               }
             };
        </script>
  <script type=text/javascript
          src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script>
  <script type=text/javascript>$(document).ready(function() {$(&#39;a:has(img)&#39;).css(&#39;border-bottom&#39;, &#39;none&#39;)})</script>
 </head>
 <body>
  <div class=page><a id=fork-me href=https://github.com/40ants/reblocks>Fork me on GitHub</a>
   <div class=navbar>
    <div class=navbar-inner>
     <a class=brand href="/">
      <img class=logo
           src=https://40ants.com/img/logo.svg></a>
     <ul class=nav>
      <li><a href=/about.html>Who We Are</a>
      <li><a href=https://gitter.im/40ants/team>Chat With Us</a>
      <li><a href=/tips.html>Lisp Tips</a>
      <li><a href=/projects.html>Our Projects</a>
     </ul>
    </div>
   </div>
   <input type=checkbox id=sidebar-check>
   <label for=sidebar-check>
    <div id=sidebar-trigger>
     <span></span><span></span><span></span>
    </div></label><div class=sidebar><div class=header><form class=search method=GET
      action="../search/">
      <input type=text name=q>
      <input type=submit value=Search><span id=search-progress></span>
     </form>
    </div><div class=content><div class=page-toc><ul><li><p><a href="../#x-28REBLOCKS-2FDOC-2FINDEX-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28REBLOCKS-2FDOC-2FINDEX-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Introduction</a></p><ul><li><p><a href="../#core-features-of-reblocks" data-document="../" data-node="core-features-of-reblocks">Core Features of Reblocks</a></p></li><li><p><a href="../#removed-features" data-document="../" data-node="removed-features">Removed Features</a></p></li><li><p><a href="../#learning-reblocks" data-document="../" data-node="learning-reblocks">Learning Reblocks</a></p></li><li><p><a href="../#getting-support" data-document="../" data-node="getting-support">Getting Support</a></p></li></ul></li><li><p><a href="../installation/#x-28REBLOCKS-2FDOC-2FINSTALLATION-3A-40INSTALLATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../installation/" data-node="x-28REBLOCKS-2FDOC-2FINSTALLATION-3A-40INSTALLATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Installation</a></p><ul><li><p><a href="../installation/#setup-your-common-lisp-environment" data-document="../installation/" data-node="setup-your-common-lisp-environment">Setup your Common Lisp environment</a></p><ul><li><p><a href="../installation/#common-lisp-implementation" data-document="../installation/" data-node="common-lisp-implementation">Common Lisp implementation</a></p></li><li><p><a href="../installation/#development-environment-setup" data-document="../installation/" data-node="development-environment-setup">Development environment setup</a></p></li></ul></li><li><p><a href="../installation/#installation" data-document="../installation/" data-node="installation">Installation</a></p></li></ul></li><li><p><a href="../quickstart/#x-28REBLOCKS-2FDOC-2FQUICKSTART-3A-40QUICKSTART-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../quickstart/" data-node="x-28REBLOCKS-2FDOC-2FQUICKSTART-3A-40QUICKSTART-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Quickstart</a></p><ul><li><p><a href="../quickstart/#the-task-widget" data-document="../quickstart/" data-node="the-task-widget">The Task widget</a></p></li><li><p><a href="../quickstart/#the-tasks-list-widget" data-document="../quickstart/" data-node="the-tasks-list-widget">The Tasks-list widget</a></p></li><li><p><a href="../quickstart/#adding-tasks" data-document="../quickstart/" data-node="adding-tasks">Adding tasks</a></p></li><li><p><a href="../quickstart/#toggle-tasks" data-document="../quickstart/" data-node="toggle-tasks">Toggle tasks</a></p></li><li><p><a href="../quickstart/#what-is-next" data-document="../quickstart/" data-node="what-is-next">What is next?</a></p></li></ul></li><li><p><a href="../components/#x-28REBLOCKS-2FDOC-2FCOMPONENTS-3A-40COMPONENTS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../components/" data-node="x-28REBLOCKS-2FDOC-2FCOMPONENTS-3A-40COMPONENTS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Components</a></p><ul><li><p><a href="../components/#widgets" data-document="../components/" data-node="widgets">Widgets</a></p></li><li><p><a href="../components/#actions" data-document="../components/" data-node="actions">Actions</a></p></li><li><p><a href="../components/#navigations-and-dispatchers" data-document="../components/" data-node="navigations-and-dispatchers">Navigations and dispatchers</a></p></li><li><p><a href="../components/#servers" data-document="../components/" data-node="servers">Servers</a></p></li></ul></li><li><p><a href="../apps/#x-28REBLOCKS-2FDOC-2FAPP-3A-3A-40APPS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../apps/" data-node="x-28REBLOCKS-2FDOC-2FAPP-3A-3A-40APPS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Apps</a></p><ul><li><p><a href="../apps/#api" data-document="../apps/" data-node="api">API</a></p></li></ul></li><li><p><a href="../widgets/#x-28REBLOCKS-2FDOC-2FWIDGETS-3A-3A-40WIDGETS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../widgets/" data-node="x-28REBLOCKS-2FDOC-2FWIDGETS-3A-3A-40WIDGETS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Widgets</a></p><ul><li><p><a href="../widgets/#example" data-document="../widgets/" data-node="example">Example</a></p></li><li><p><a href="../widgets/#api" data-document="../widgets/" data-node="api">API</a></p></li></ul></li><li><p><a href="../rendering/#x-28REBLOCKS-2FDOC-2FRENDERING-3A-3A-40RENDERING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../rendering/" data-node="x-28REBLOCKS-2FDOC-2FRENDERING-3A-3A-40RENDERING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Content Rendering</a></p><ul><li><p><a href="../rendering/#x-28REBLOCKS-2FDOC-2FRENDERING-3A-3A-40PAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../rendering/" data-node="x-28REBLOCKS-2FDOC-2FRENDERING-3A-3A-40PAGE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Page Rendering</a></p></li><li><p><a href="../rendering/#x-28REBLOCKS-2FDOC-2FRENDERING-3A-3A-40HTML-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../rendering/" data-node="x-28REBLOCKS-2FDOC-2FRENDERING-3A-3A-40HTML-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">HTML Rendering</a></p><ul><li><p><a href="../rendering/#api" data-document="../rendering/" data-node="api">API</a></p></li></ul></li></ul></li><li><p><a href="../actions/#x-28REBLOCKS-2FDOC-2FACTIONS-3A-3A-40ACTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../actions/" data-node="x-28REBLOCKS-2FDOC-2FACTIONS-3A-3A-40ACTIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Actions</a></p><ul><li><p><a href="../actions/#application-actions" data-document="../actions/" data-node="application-actions">Application actions</a></p></li><li><p><a href="../actions/#session-actions" data-document="../actions/" data-node="session-actions">Session actions</a></p></li><li><p><a href="../actions/#using-at-the-frontend" data-document="../actions/" data-node="using-at-the-frontend">Using at the Frontend</a></p></li><li><p><a href="../actions/#api" data-document="../actions/" data-node="api">API</a></p></li></ul></li><li><p><a href="../routing/#x-28REBLOCKS-2FDOC-2FROUTING-3A-40ROUTING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../routing/" data-node="x-28REBLOCKS-2FDOC-2FROUTING-3A-40ROUTING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Routing</a></p><ul><li><p><a href="../routing/#x-28REBLOCKS-2FDOC-2FROUTING-3A-3A-40QUICKSTART-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../routing/" data-node="x-28REBLOCKS-2FDOC-2FROUTING-3A-3A-40QUICKSTART-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Quickstart</a></p><ul><li><p><a href="../routing/#getting-started" data-document="../routing/" data-node="getting-started">Getting started</a></p></li><li><p><a href="../routing/#extending-the-example-to-each-task-an-id" data-document="../routing/" data-node="extending-the-example-to-each-task-an-id">Extending the example: to each task an id</a></p></li><li><p><a href="../routing/#the-task-page-widget" data-document="../routing/" data-node="the-task-page-widget">The task-page widget</a></p></li><li><p><a href="../routing/#defining-routes" data-document="../routing/" data-node="defining-routes">Defining routes</a></p></li><li><p><a href="../routing/#path-and-url-parameters" data-document="../routing/" data-node="path-and-url-parameters">Path and URL parameters</a></p></li><li><p><a href="../routing/#redirections" data-document="../routing/" data-node="redirections">Redirections</a></p></li><li><p><a href="../routing/#final-steps" data-document="../routing/" data-node="final-steps">Final steps</a></p></li></ul></li><li><p><a href="../routing/#x-28REBLOCKS-2FDOC-2FROUTING-3A-3A-40LOWLEVEL-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../routing/" data-node="x-28REBLOCKS-2FDOC-2FROUTING-3A-3A-40LOWLEVEL-API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Lowlevel API</a></p></li></ul></li><li><p><a href="../dependencies/#x-28REBLOCKS-2FDOC-2FDEPENDENCIES-3A-3A-40DEPENDENCIES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../dependencies/" data-node="x-28REBLOCKS-2FDOC-2FDEPENDENCIES-3A-3A-40DEPENDENCIES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Dependencies</a></p><ul><li><p><a href="../dependencies/#api" data-document="../dependencies/" data-node="api">API</a></p></li></ul></li><li><p><a href="../request/#x-28REBLOCKS-2FDOC-2FREQUEST-3A-3A-40REQUEST-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../request/" data-node="x-28REBLOCKS-2FDOC-2FREQUEST-3A-3A-40REQUEST-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Request</a></p><ul><li><p><a href="../request/#api" data-document="../request/" data-node="api">API</a></p></li></ul></li><li><p><a href="../response/#x-28REBLOCKS-2FDOC-2FRESPONSE-3A-3A-40RESPONSE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../response/" data-node="x-28REBLOCKS-2FDOC-2FRESPONSE-3A-3A-40RESPONSE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Response</a></p><ul><li><p><a href="../response/#api" data-document="../response/" data-node="api">API</a></p></li></ul></li><li><p><a href="../hooks/#x-28REBLOCKS-2FDOC-2FHOOKS-3A-3A-40HOOKS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../hooks/" data-node="x-28REBLOCKS-2FDOC-2FHOOKS-3A-3A-40HOOKS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Hooks</a></p><ul><li><p><a href="../hooks/#how-to-use-these-hooks" data-document="../hooks/" data-node="how-to-use-these-hooks">How to use these hooks?</a></p></li><li><p><a href="../hooks/#defining-your-own-hooks" data-document="../hooks/" data-node="defining-your-own-hooks">Defining your own hooks</a></p></li><li><p><a href="../hooks/#hooks-api" data-document="../hooks/" data-node="hooks-api">Hooks API</a></p></li></ul></li><li><p><a href="../session/#x-28REBLOCKS-2FDOC-2FSESSION-3A-3A-40SESSION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../session/" data-node="x-28REBLOCKS-2FDOC-2FSESSION-3A-3A-40SESSION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Using the Session</a></p><ul><li><p><a href="../session/#session-initialization" data-document="../session/" data-node="session-initialization">Session initialization</a></p></li><li><p><a href="../session/#storing-data" data-document="../session/" data-node="storing-data">Storing data</a></p></li><li><p><a href="../session/#api" data-document="../session/" data-node="api">API</a></p></li></ul></li><li><p><a href="#x-28REBLOCKS-2FDOC-2FINDEX-3A-3A-40REMOVED-FEATURES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-2FDOC-2FINDEX-3A-3A-40REMOVED-FEATURES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Removed Features</a></p><ul><li><p><a href="#x-28REBLOCKS-2FDOC-2FVIEWS-3A-3A-40VIEWS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-2FDOC-2FVIEWS-3A-3A-40VIEWS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Views</a></p></li><li><p><a href="#x-28REBLOCKS-2FDOC-2FTEMPLATES-3A-3A-40TEMPLATES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-2FDOC-2FTEMPLATES-3A-3A-40TEMPLATES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Templates</a></p><ul><li><p><a href="#template-function" data-document="" data-node="template-function">Template function</a></p></li><li><p><a href="#template-definition" data-document="" data-node="template-definition">Template definition</a></p></li></ul></li><li><p><a href="#x-28REBLOCKS-2FDOC-2FFORMS-3A-3A-40FORMS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-2FDOC-2FFORMS-3A-3A-40FORMS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Forms</a></p><ul><li><p><a href="#introduction" data-document="" data-node="introduction">Introduction</a></p></li><li><p><a href="#simple-example" data-document="" data-node="simple-example">Simple example</a></p></li><li><p><a href="#quickforms" data-document="" data-node="quickforms">Quickforms</a></p></li></ul></li><li><p><a href="#x-28REBLOCKS-2FDOC-2FCONTINUATIONS-3A-3A-40CONTINUATIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28REBLOCKS-2FDOC-2FCONTINUATIONS-3A-3A-40CONTINUATIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Continuations-based tools</a></p></li></ul></li><li><p><a href="../api/#x-28REBLOCKS-2FDOC-2FAPI-3A-40API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../api/" data-node="x-28REBLOCKS-2FDOC-2FAPI-3A-40API-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Unsorted API</a></p><ul><li><p><a href="../api/#variables" data-document="../api/" data-node="variables">Variables</a></p></li></ul></li><li><p><a href="../contribute/#x-28REBLOCKS-2FDOC-2FCONTRIBUTE-3A-3A-40CONTRIBUTE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../contribute/" data-node="x-28REBLOCKS-2FDOC-2FCONTRIBUTE-3A-3A-40CONTRIBUTE-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Contributing to Reblocks</a></p></li><li><p><a href="../changelog/#x-28REBLOCKS-2FDOC-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../changelog/" data-node="x-28REBLOCKS-2FDOC-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">ChangeLog</a></p></li></ul>
     </div>
    </div><div class=footer>
     <a href=https://40ants.com/doc>[generated by 40ANTS-DOC]</a>
    </div>
   </div><div class=content role=main><h1>Removed Features<a class=header-link
     href=#x-28REBLOCKS-2FDOC-2FINDEX-3A-3A-40REMOVED-FEATURES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-2FDOC-2FINDEX-3A-3A-40REMOVED-FEATURES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29>
      ¶</a></h1><p>During refactoring, I've removed some other interesting conceptions from
the core of the framework. They could be reborn as a separate libraries
as well as navigation widget.</p><h2>Views<a class=header-link
     href=#x-28REBLOCKS-2FDOC-2FVIEWS-3A-3A-40VIEWS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-2FDOC-2FVIEWS-3A-3A-40VIEWS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29>
      ¶</a></h2><p>Views provided convenient ways to define how data object are to be rendered.</p><p>Originally, Weblocks supported three types of views:</p><ul><li><p>data views;</p></li><li><p>table views;</p></li><li><p>form views.</p></li></ul><p>Form views were especially useful because they let you build forms
in a declarative manner, error checking and reporting included. </p><p>Views mainly consist of a rendering framework unique to the
view and a series of view fields. The table view for example knows
how to render a <code>HTML</code> table.</p><p>View fields usually map to the slots of your data class but they were
flexible enough to be used in any other way. Associated with each view field
regardless of the view type are things like a human-readable label and
information on how to render the field (presentation).</p><p>Form views included additional parameters like how to translate user
input to a proper model value (parser) and constraints on the data
(satisfies).</p><h2>Templates<a class=header-link
     href=#x-28REBLOCKS-2FDOC-2FTEMPLATES-3A-3A-40TEMPLATES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-2FDOC-2FTEMPLATES-3A-3A-40TEMPLATES-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29>
      ¶</a></h2><p>Template were something different from view.  It is another layer which
allows to customize views look.  Most of weblocks code supported templates
and this gave us ability to change widget html without changing widget
logic.</p><p>Templates brought theming functionality into original Weblocks, and intended to
improve widgets reusing.</p><p>I think it is better to split you render method into a smaller ones
and allow user to override these methods. But anyway, here is a short example
of how did templated work in old version of the Weblocks.</p><p><b>Note!</b> Following subsections contains only examples and such code is
not supported in the latest version of the Weblocks. However you might want
to implement something like that on your own or use <a href="https://github.com/mmontone/djula">djula</a>,
<a href="https://github.com/kanru/cl-mustache">mustache</a> or other template engine.</p><h3 id="template-function">Template function</h3><p>Template function received some key parameters and returned html string.
You was able to use any html generation library or template library for templates. </p><p>You was encouraged to </p><ul><li><p>use naming convention and call template <code>*-wt</code> (with &quot;-wt&quot; suffix
  ). &quot;wt&quot; means either &quot;web template&quot; or &quot;Weblocks template&quot;. Since
  template should be overriden often, name convention will made easier
  to find what we need.</p></li><li><p>use <code>&amp;allow-other-keys</code> in every template.</p></li><li><p>use no complex logic and no computations in templates. Just simple
  iteration over lists and if statements. The best
  thing would be to use no more logic then in <a href="https://github.com/kanru/cl-mustache">mustache</a> templates.</p></li></ul><p>Here is a template example.</p><pre><code class="">(defun my-wt (&amp;key (content &quot;I'm template&quot;) &amp;allow-other-keys)
    (with-html-to-string 
        (:p (str content))))</code></pre><h3 id="template-definition">Template definition</h3><p>Template definition is a <code>deftemplate</code> call. </p><pre><code class="">(deftemplate :my-wt 'my-wt)</code></pre><p>Here we just connected <code>:my-wt</code> template name with template function <code>'my-wt</code>.</p><p>And here comes most important templates part.
We can connect many template functions to template name and only one of them - effective template - will be called.
Effectiveness determined by priority which is received from context matchers. 
Context matcher just receives context and returns priority number.</p><pre><code class="">(defun my-other-wt(&amp;key (content &quot;I'm template&quot;) &amp;allow-other-keys)
  (with-html-to-string 
    (:div :class &quot;other-template&quot; (str content))))

(deftemplate :my-wt 'my-other-wt 
  :context-matches (lambda(&amp;rest context)
    100))</code></pre><p><code>my-other-wt</code> has more priority than <code>my-wt</code> so it will be called. 
And this is how template overriding is done.</p><p>There is also <code>:application-class</code> parameter which gives template 10
more priority points.</p><pre><code class="">(deftemplate :page-wt 'my-customized-page-wt 
             :application-class 'my-webapp)</code></pre><p>Here <code>'my-customized-page-wt</code> function will have more priority than
one defined in Weblocks.</p><p><b>Note.</b> This context matching logic was too complex and at some places it was intersected with <code>CLOS</code> and generic functions
that is why I've decided to exclude templates from the core of the Weblocks.</p><p>As an example for the oldschool templating you may see
<a href="https://github.com/html/weblocks-twitter-bootstrap-application">Weblocks Twitter Bootstrap theme</a>.</p><p><b>Footnotes</b></p><p><a name="tree"></a>
[1] An acyclic graph with exactly one parent per node.</p><p><a name="uri-tokens"></a>
[2] Еach path component of an <code>URI</code> is a token; for example
        in <code>&quot;/foo/bar/quux&quot;</code> there are three tokens <code>foo</code>,
        <code>bar</code> and <code>quux</code>.</p><p><a name="function-designators"></a>
[3] I.e. symbols naming a global function and
        function objects themselves.</p><h2>Forms<a class=header-link
     href=#x-28REBLOCKS-2FDOC-2FFORMS-3A-3A-40FORMS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-2FDOC-2FFORMS-3A-3A-40FORMS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29>
      ¶</a></h2><blockquote><p><b>Warning!</b> This section is outdated and belongs to the old Weblocks documention.
All widgets, described below, were removed from the core framework.
Probably we need only to link to the <a href="https://github.com/40ants/reblocks-ui">reblocks-ui</a> here.</p><p>Below you'll find a description how did forms work in the
original Weblocks. It is given to here to show who one might
handle data-models changes. Probably someone will want to
resurrect this method in a Weblocks extension library.</p></blockquote><p>Forms enable the user to communicate with a web application.</p><p>Usually the server side action boils down to selecting, modifying, creating or
deleting data sets (this is sometimes abbreviated as <code>CRUD</code>: Create/Read/Update/Delete)</p><p>Building web forms is usually a cumbersome process. Elaborate but
complicated solutions have been devised
<a href="https://pear.php.net/manual/en/package.html.html-quickform.tutorial.php">php-quickform</a>,
but so far we haven't found any of them to match the ease of use and flexibility of
Weblocks' declarative view <code>DSL</code>.</p><h3 id="introduction">Introduction</h3><p>The form mechanism consists of two parts, the <a href="https://quickref.common-lisp.net/weblocks.html#go-to-the-WEBLOCKS_2236_2236DATAFORM-class">DATAFORM</a> widget and
the <a href="https://quickref.common-lisp.net/weblocks.html#go-to-the-WEBLOCKS_2236_2236FORM_002dVIEW-class">FORM-VIEW</a> view type.</p><p>Forms are usually built by defining form views using the <a href="https://quickref.common-lisp.net/weblocks.html#go-to-the-WEBLOCKS_2236_2236DEFVIEW-macro">DEFVIEW</a> macro
and instantiating a <a href="https://quickref.common-lisp.net/weblocks.html#go-to-the-WEBLOCKS_2236_2236DATAFORM-class">DATAFORM</a> object with this view.</p><h3 id="simple-example">Simple example</h3><p>Let's define a view for creating and editing bug reports.</p><p>Let the model be defined thus:</p><pre><code class="">(defclass bug-report ()
  ((id :type integer :initform (create-unique-id))
   (status :type (member :new :open :resolved) :initform :new)
   (summary :type string)
   (body :type string)))</code></pre><p>This view should apply to users that are not developers: they may
enter a summary and body but that's it.</p><pre><code class="">(defview bug-report-form-view
    (:type form :inherit-from '(:scaffold bug-report)
     :caption &quot;Enter a bug report&quot;)
  (id :hidep t)
  (status :hidep t))</code></pre><p>The <code>SUMMARY</code> and <code>BODY</code> fields will default to
strings; every form field is presented as a text input and parsed as a
string by default.</p><p>Let's use this view to derive the view for developers:</p><pre><code class="">(defview bug-report-form-view/developer
    (:type form :inherit-from 'bug-report-form-view )
  (status :hidep nil))</code></pre><p>The status field will automatically be displayed as a dropdown control
since the scaffold inspector has decided this upon the slot's type.</p><p>You can define scaffolding rules for your own types.</p><p>As part of the validation process Weblocks will also check whether a
user input matches the slot's type regardless of whether you use
scaffolding or not.</p><p>But let's assume that we want custom labels for the dropdown:</p><pre><code class="">(defview bug-report-form-view/developer
    (:type form :inherit-from 'bug-report-form-view )
  (status :hidep nil
          :present-as (dropdown :choices '((&quot;This report is totally new, don't trust it!&quot; . :new)
                                           (&quot;Yeah okay, we're working on it.&quot; . :open)
                                           (&quot;We've solved that problem already...&quot; . :resolved)))))</code></pre><h3 id="quickforms">Quickforms</h3><p>Quickforms are specialized Dataforms.</p><p>They provide a way to build forms based entirely on a view; they are handy
for operations where you don't have the user working on an actual model instance.</p><p>Let's dive right into it:</p><pre><code class="">(make-quickform 
  (defview nil 
    (:caption &quot;A Quickform&quot; :type form :persistp nil)
    (some-text  :present-as input))
  :on-success (lambda (form data)
    (with-html 
      &quot;Submitted data - &quot;
      (str (slot-value data 'some-text)))))</code></pre><p>This will display form with single field. After form submit we'll see text with value submitted.
<code>DATA</code> object here is a class created dynamically from view fields.</p><pre><code class="">:persistp nil</code></pre><p>in view definition is necessary, we don't want dynamic class to persist.</p><p>There are options in <a href="https://quickref.common-lisp.net/weblocks.html#go-to-the-WEBLOCKS_2236_2236DATAFORM-class">MAKE-QUICKFORM</a> for validation, control flow and other things.
See <a href="https://quickref.common-lisp.net/weblocks.html#go-to-the-WEBLOCKS_2236_2236DATAFORM-class">MAKE-QUICKFORM</a> documentation.</p><h2>Continuations-based tools<a class=header-link
     href=#x-28REBLOCKS-2FDOC-2FCONTINUATIONS-3A-3A-40CONTINUATIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28REBLOCKS-2FDOC-2FCONTINUATIONS-3A-3A-40CONTINUATIONS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29>
      ¶</a></h2><blockquote><p><b>Warning!</b> Continuations support support was removed in the Reblocks fork.</p></blockquote><p>This feature will reborn as a separate library with a custom widget class.</p>
   </div><div class=footer>
    <hr class=separator>
    <p class=fineprint>Created with passion by <em>40Ants</em><a class=lisp-logo
     href="http://lisp-lang.org/">
      <img
           src=https://40ants.com/img/made-with-lisp.svg></a>
   </div>
  </div>
 </body>
</html>